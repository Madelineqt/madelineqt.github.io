(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){e.exports=a.p+"static/media/signup.8049109a.png"},39:function(e,t,a){e.exports=a(76)},44:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(35),o=a.n(c),s=(a(44),a(1)),u=a.n(s),i=a(3),l=a(2),m=a(6),p=a(16),f=a(4),d=a.n(f),b="CLONTAGRAM_TOKEN";function E(e){localStorage.setItem(b,e)}function h(){return localStorage.getItem(b)}function g(){localStorage.removeItem(b)}var v=a(8),_=a(13),k=a(18);function j(e){var t=e.usuario;return r.a.createElement("nav",{className:"Nav"},r.a.createElement("ul",{className:"Nav__links"},r.a.createElement("li",null,r.a.createElement(m.b,{to:"/",className:"Nav__link"},"Clontagram")),t&&r.a.createElement(x,{usuario:t})))}function x(e){var t=e.usuario;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"Nav__link-push"},r.a.createElement(m.b,{className:"Nav__link",to:"/upload"},r.a.createElement(v.a,{icon:_.a}))),r.a.createElement("li",{className:"Nav__link-margin-left"},r.a.createElement(m.b,{className:"Nav__link",to:"/explore"},r.a.createElement(v.a,{icon:k.a}))),r.a.createElement("li",{className:"Nav__link-margin-left"},r.a.createElement(m.b,{className:"Nav__link",to:"/perfil/".concat(t.username)},r.a.createElement(v.a,{icon:k.d}))))}function N(){return r.a.createElement("div",{className:"Loading"},r.a.createElement("div",{className:"Loading__dot-1"}),r.a.createElement("div",{className:"Loading__dot-2"}),r.a.createElement("div",{className:"Loading__dot-3"}))}function O(e){var t=e.mensaje,a=e.esconderError;return t?r.a.createElement("div",{className:"ErrorContainer",role:"alert"},r.a.createElement("div",{className:"Error__inner"},r.a.createElement("span",{className:"block"},t),r.a.createElement("button",{className:"Error__button",onClick:a},r.a.createElement(v.a,{className:"Error__icon",icon:k.c})))):null}var y=a(15),w=a(9);function S(e){var t=e.children,a=e.center,n="Main ".concat(a?"Main-center":"");return r.a.createElement("main",{className:n},t)}var C=a(38),P=a.n(C);function L(e){var t=e.signup,a=e.mostrarError,c=Object(n.useState)({email:"",username:"",password:"",bio:"",nombre:""}),o=Object(l.a)(c,2),s=o[0],p=o[1];function f(e){p(Object(w.a)({},s,Object(y.a)({},e.target.name,e.target.value)))}function d(){return(d=Object(i.a)(u.a.mark(function e(n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,t(s);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),a(e.t0.response.data.message),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[1,6]])}))).apply(this,arguments)}return r.a.createElement(S,{center:!0},r.a.createElement("div",{className:"Signup"},r.a.createElement("img",{src:P.a,alt:"",className:"Signup__img"}),r.a.createElement("div",{className:"FormContainer"},r.a.createElement("h1",{className:"Form__titulo"},"Clontagram"),r.a.createElement("p",{className:"FormContainer__info"},"Reg\xedstrate para que veas el clon de Instagram"),r.a.createElement("form",{onSubmit:function(e){return d.apply(this,arguments)}},r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",className:"Form__field",required:!0,onChange:f,value:s.email}),r.a.createElement("input",{type:"text",name:"nombre",placeholder:"Nombre y Apellido",className:"Form__field",required:!0,minLength:"3",maxLength:"100",onChange:f,value:s.nombre}),r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",className:"Form__field",required:!0,pattern:"^[a-zA-Z][a-zA-Z0-9-_\\.]{5,12}$",minLength:"3",maxLength:"30",onChange:f,value:s.username}),r.a.createElement("input",{type:"text",name:"bio",placeholder:"Cu\xe9ntanos de ti...",className:"Form__field",required:!0,maxLength:"150",onChange:f,value:s.bio}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Contrase\xf1a",className:"Form__field",required:!0,minLength:"6",onChange:f,value:s.password}),r.a.createElement("button",{className:"Form__submit",type:"submit"},"Sign up"),r.a.createElement("p",{className:"FormContainer__info"},"Ya tienes cuenta? ",r.a.createElement(m.b,{to:"/login"},"Login"))))))}function F(e){var t=e.login,a=e.mostrarError,c=Object(n.useState)({email:"",password:""}),o=Object(l.a)(c,2),s=o[0],p=o[1];function f(e){p(Object(w.a)({},s,Object(y.a)({},e.target.name,e.target.value)))}function d(){return(d=Object(i.a)(u.a.mark(function e(n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,t(s.email,s.password);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),a(e.t0.response.data.message),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[1,6]])}))).apply(this,arguments)}return r.a.createElement(S,{center:!0},r.a.createElement("div",{className:"FormContainer"},r.a.createElement("h1",{className:"Form__titulo"},"Clontagram"),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){return d.apply(this,arguments)}},r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",className:"Form__field",required:!0,onChange:f,value:s.email}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Contrase\xf1a",className:"Form__field",required:!0,onChange:f,value:s.password}),r.a.createElement("button",{type:"submit",className:"Form__submit"},"Login"),r.a.createElement("p",{className:"FormContainer__info"},"No tienes cuenta? ",r.a.createElement(m.b,{to:"/signup"},"Signup"))))))}function q(e){var t=e.history,a=e.mostrarError,c=Object(n.useState)(""),o=Object(l.a)(c,2),s=o[0],m=o[1],p=Object(n.useState)(!1),f=Object(l.a)(p,2),b=f[0],E=f[1],h=Object(n.useState)(!1),g=Object(l.a)(h,2),v=g[0],_=g[1],k=Object(n.useState)(""),j=Object(l.a)(k,2),x=j[0],N=j[1];function O(){return(O=Object(i.a)(u.a.mark(function e(t){var n,r,c,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(!0),n=t.target.files[0],r={headers:{"Content-Type":n.type}},e.next=6,d.a.post("https://clontagram.herokuapp.com/api/posts/upload",n,r);case 6:c=e.sent,o=c.data,m(o.url),E(!1),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),E(!1),a(e.t0.response.data),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[0,12]])}))).apply(this,arguments)}function y(){return(y=Object(i.a)(u.a.mark(function e(n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!v){e.next=3;break}return e.abrupt("return");case 3:if(!b){e.next=6;break}return a("No se ha terminado de subir la imagen"),e.abrupt("return");case 6:if(s){e.next=9;break}return a("Primero selecciona una imagen"),e.abrupt("return");case 9:return e.prev=9,_(!0),r={caption:x,url:s},e.next=14,d.a.post("https://clontagram.herokuapp.com/api/posts",r);case 14:_(!1),t.push("/"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(9),a(e.t0.response.data);case 21:case"end":return e.stop()}},e,null,[[9,18]])}))).apply(this,arguments)}return r.a.createElement(S,{center:!0},r.a.createElement("div",{className:"Upload"},r.a.createElement("form",{onSubmit:function(e){return y.apply(this,arguments)}},r.a.createElement("div",{className:"Upload__image-section"},r.a.createElement(D,{imagenUrl:s,subiendoImagen:b,handleImagenSeleccionada:function(e){return O.apply(this,arguments)}})),r.a.createElement("textarea",{name:"caption",className:"Upload__caption",required:!0,maxLength:"180",placeholder:"Caption de tu post",value:x,onChange:function(e){return N(e.target.value)}}),r.a.createElement("button",{className:"Upload__submit",type:"submit"},"Post"))))}function D(e){var t=e.subiendoImagen,a=e.imagenUrl,n=e.handleImagenSeleccionada;return t?r.a.createElement(N,null):a?r.a.createElement("img",{src:"https://clontagram.herokuapp.com".concat(a),alt:""}):r.a.createElement("label",{className:"Upload__image-label"},r.a.createElement(v.a,{icon:_.e}),r.a.createElement("span",null,"Publica una foto"),r.a.createElement("input",{type:"file",className:"hidden",name:"imagen",onChange:n}))}var I=a(21),A=a(20),U=a.n(A);function B(e){var t=e.usuario;return r.a.createElement("div",{className:"Avatar"},r.a.createElement(z,{usuario:t}),r.a.createElement(m.b,{to:"/perfil/".concat(t.username)},r.a.createElement("h2",null,t.username)))}function z(e){var t=e.usuario,a={backgroundImage:!0===!!t.imagen?"url(https://clontagram.herokuapp.com".concat(t.imagen,")"):null,backgroundColor:U()(t.username)};return r.a.createElement("div",{className:"Avatar__img",style:a})}function T(e){var t=e.onSubmitLike,a=e.like;return r.a.createElement("button",{onClick:t},a?r.a.createElement(v.a,{className:"text-red-dark",icon:_.c}):r.a.createElement(v.a,{icon:k.b}))}function G(e){var t=e.onSubmitComentario,a=e.mostrarError,c=Object(n.useState)(""),o=Object(l.a)(c,2),s=o[0],m=o[1],p=Object(n.useState)(!1),f=Object(l.a)(p,2),d=f[0],b=f[1];function E(){return(E=Object(i.a)(u.a.mark(function e(n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!d){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,b(!0),e.next=7,t(s);case 7:m(""),b(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),b(!1),a("Hubo un problema enviando el comentario, intenta de nuevo");case 15:case"end":return e.stop()}},e,null,[[3,11]])}))).apply(this,arguments)}return r.a.createElement("form",{action:"",className:"Post__comentario-form-container",onSubmit:function(e){return E.apply(this,arguments)}},r.a.createElement("input",{type:"text",placeholder:"Deja un comentario...",value:s,onChange:function(e){return m(e.target.value)},required:!0,maxLength:"180"}),r.a.createElement("button",{type:"submit"},"Post"))}function H(e){return M.apply(this,arguments)}function M(){return(M=Object(i.a)(u.a.mark(function e(t){var a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a="https://clontagram.herokuapp.com/api/posts/".concat(t._id,"/likes"),!t.estaLike){e.next=7;break}return e.next=4,d.a.delete(a,{});case 4:n=Object(w.a)({},t,{estaLike:!1,numLikes:t.numLikes-1}),e.next=10;break;case 7:return e.next=9,d.a.post(a,{});case 9:n=Object(w.a)({},t,{estaLike:!0,numLikes:t.numLikes+1});case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(e,t,a){return V.apply(this,arguments)}function V(){return(V=Object(i.a)(u.a.mark(function e(t,a,n){var r,c,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("https://clontagram.herokuapp.com/api/posts/".concat(t._id,"/comentarios"),{mensaje:a});case 2:return r=e.sent,(c=r.data).usuario=n,o=Object(w.a)({},t,{comentarios:[].concat(Object(I.a)(t.comentarios),[c]),numComentarios:t.numComentarios+1}),e.abrupt("return",o);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function J(e){var t=e.post,a=e.actualizarPost,c=e.mostrarError,o=e.usuario,s=t.numLikes,p=t.numComentarios,f=t.comentarios,d=t._id,b=t.caption,E=t.url,h=t.usuario,g=t.estaLike,v=Object(n.useState)(!1),_=Object(l.a)(v,2),k=_[0],j=_[1];function x(){return(x=Object(i.a)(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,j(!0),e.next=6,H(t);case 6:n=e.sent,a(t,n),j(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),j(!1),c("Hubo un problema dandole a like, intenta de nuevo"),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[2,11]])}))).apply(this,arguments)}function N(){return(N=Object(i.a)(u.a.mark(function e(n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t,n,o);case 2:r=e.sent,a(t,r);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}return r.a.createElement("div",{className:"Post-Componente"},r.a.createElement(B,{usuario:h}),r.a.createElement("img",{src:"https://clontagram.herokuapp.com".concat(E),alt:b,className:"Post-Componente__img"}),r.a.createElement("div",{className:"Post-Componente__acciones"},r.a.createElement("div",{className:"Post-Componente__like-container"},r.a.createElement(T,{onSubmitLike:function(){return x.apply(this,arguments)},like:g})),r.a.createElement("p",null,"Liked por ",s," personas"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(m.b,{to:"/perfil/".concat(h.username)},r.a.createElement("b",null,h.username))," ",b),r.a.createElement(Z,{_id:d,numComentarios:p}),r.a.createElement(K,{comentarios:f}))),r.a.createElement(G,{onSubmitComentario:function(e){return N.apply(this,arguments)}}))}function Z(e){var t=e._id,a=e.numComentarios;return a<4?null:r.a.createElement("li",{className:"text-grey-dark"},r.a.createElement(m.b,{to:"/post/".concat(t)},"Ver los ",a," comentarios"))}function K(e){var t=e.comentarios;return 0===t.length?null:t.slice(0,3).map(function(e){return r.a.createElement("li",{key:e._id},r.a.createElement(m.b,{to:"/perfil/".concat(e.usuario.username)},r.a.createElement("b",null,e.usuario.username))," ",e.mensaje)})}function Y(e){return $.apply(this,arguments)}function $(){return($=Object(i.a)(u.a.mark(function e(t){var a,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t?"?fecha=".concat(t):"",e.next=3,d.a.get("https://clontagram.herokuapp.com/api/posts/feed".concat(a));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Q=3;function W(e){var t=e.mostrarError,a=e.usuario,c=Object(n.useState)([]),o=Object(l.a)(c,2),s=o[0],m=o[1],p=Object(n.useState)(!0),f=Object(l.a)(p,2),d=f[0],b=f[1],E=Object(n.useState)(!1),h=Object(l.a)(E,2),g=h[0],v=h[1],_=Object(n.useState)(!1),k=Object(l.a)(_,2),j=k[0],x=k[1];function O(e,t){m(function(a){return a.map(function(a){return a!==e?a:t})})}function y(){return(y=Object(i.a)(u.a.mark(function e(){var a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(!0),a=s[s.length-1].fecha_creado,e.next=7,Y(a);case 7:n=e.sent,m(function(e){return[].concat(Object(I.a)(e),Object(I.a)(n))}),v(!1),w(n),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),t("Problema al cargar"),v(!1);case 17:case"end":return e.stop()}},e,null,[[2,13]])}))).apply(this,arguments)}function w(e){e.length<Q&&x(!0)}return Object(n.useEffect)(function(){function e(){return(e=Object(i.a)(u.a.mark(function e(){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y();case 3:a=e.sent,m(a),b(!1),w(a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),t("Problema cargando la feed"),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t]),d?r.a.createElement(S,{center:!0},r.a.createElement(N,null)):d||0!==s.length?r.a.createElement(S,{center:!0},r.a.createElement("div",{className:"Feed"},s.map(function(e){return r.a.createElement(J,{key:e._id,post:e,actualizarPost:O,mostrarError:t,usuario:a})}),r.a.createElement(ee,{onClick:function(){return y.apply(this,arguments)},todosLosPostsCargados:j}))):r.a.createElement(S,{center:!0},r.a.createElement(X,null))}function X(){return r.a.createElement("div",{className:"NoSiguesANadie"},r.a.createElement("p",{className:"NoSiguesANadie__mensaje"},"Tu feed no tiene fotos porque no sigues a nadie, o porque no han publicado fotos."),r.a.createElement("div",{className:"text-center"},r.a.createElement(m.b,{to:"/explore",className:"NoSiguesANadie__boton"},"Explora Clontagram")))}function ee(e){var t=e.onClick;return e.todosLosPostsCargados?r.a.createElement("div",{className:"Feed__no-hay-mas-posts"},"No hay m\xe1s posts"):r.a.createElement("button",{className:"Feed__cargar-mas",onClick:t},"Ver m\xe1s")}function te(e){var t=e.onSubmitBorrar;return r.a.createElement("button",{onClick:t},r.a.createElement(v.a,{icon:_.d}))}function ae(e){var t=e.mensaje;return r.a.createElement(S,{center:!0},r.a.createElement("div",null,r.a.createElement("h2",{className:"RecursoNoExiste__mensaje"},t),r.a.createElement("p",{className:"RecursoNoExiste__link-container"},"Ir al ",r.a.createElement(m.b,{to:"/"},"home")," ")))}function ne(e){return re.apply(this,arguments)}function re(){return(re=Object(i.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://clontagram.herokuapp.com/api/posts/".concat(t._id),d.a.delete(a,t._id),e.abrupt("return");case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ce(e){var t=e.history,a=e.mostrarError,c=e.match,o=e.usuario,s=c.params.id,m=Object(n.useState)(null),p=Object(l.a)(m,2),f=p[0],b=p[1],E=Object(n.useState)(!0),h=Object(l.a)(E,2),g=h[0],v=h[1],_=Object(n.useState)(!1),k=Object(l.a)(_,2),j=k[0],x=k[1],O=Object(n.useState)(!1),y=Object(l.a)(O,2),w=y[0],C=y[1],P=Object(n.useState)(!1),L=Object(l.a)(P,2),F=L[0],q=L[1];function D(){return(D=Object(i.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(f,t,o);case 2:a=e.sent,b(a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(){return(I=Object(i.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!F){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,q(!0),e.next=6,ne(f);case 6:q(!1),t.push("/perfil/".concat(o.username)),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),q(!1),a("Error borrando el post"),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[2,10]])}))).apply(this,arguments)}function A(){return(A=Object(i.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,C(!0),e.next=6,H(f);case 6:t=e.sent,b(t),C(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),C(!1),a("Hubo un problema dandole a like, intenta de nuevo"),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[2,11]])}))).apply(this,arguments)}return Object(n.useEffect)(function(){function e(){return(e=Object(i.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("https://clontagram.herokuapp.com/api/posts/".concat(s));case 3:t=e.sent,n=t.data,b(n),v(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),!e.t0.response||404!==e.t0.response.status&&400!==e.t0.response.status?a("Hubo un problema cargando este post."):x(!0),v(!1);case 13:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[s,a]),g?r.a.createElement(S,null,r.a.createElement(N,null)):j?r.a.createElement(ae,{mensaje:"El post que estas intentando ver no existe"}):null==f?null:r.a.createElement(S,{center:!0},r.a.createElement(oe,Object.assign({},f,{onSubmitComentario:function(e){return D.apply(this,arguments)},onSubmitLike:function(){return A.apply(this,arguments)},onSubmitBorrar:function(){return I.apply(this,arguments)},esmipost:function(){return o._id===f.usuario._id}})))}function oe(e){var t=e.comentarios,a=e.caption,n=e.url,c=e.usuario,o=e.estaLike,s=e.onSubmitLike,u=e.onSubmitComentario,i=e.onSubmitBorrar,l=e.esmipost;return r.a.createElement("div",{className:"Post"},r.a.createElement("div",{className:"Post__image-container"},r.a.createElement("img",{src:"https://clontagram.herokuapp.com".concat(n),alt:a})),r.a.createElement("div",{className:"Post__side-bar"},r.a.createElement(B,{usuario:c}),r.a.createElement("div",{className:"Post__comentarios-y-like"},r.a.createElement(se,{usuario:c,caption:a,comentarios:t}),r.a.createElement("div",{className:"Post__like"},r.a.createElement(T,{onSubmitLike:s,like:o})),l()&&r.a.createElement("div",{className:"Post__like"},r.a.createElement(te,{onSubmitBorrar:i})),r.a.createElement(G,{onSubmitComentario:u}))))}function se(e){var t=e.usuario,a=e.caption,n=e.comentarios;return r.a.createElement("ul",{className:"Post__comentarios"},r.a.createElement("li",{className:"Post__comentario"},r.a.createElement(m.b,{to:"/perfil.".concat(t),className:"Post__autor-comentario"},r.a.createElement("b",null,t.username))," ",a),n.map(function(e){return r.a.createElement("li",{className:"Post__comentario",key:e._id},r.a.createElement(m.b,{to:"/perfil.".concat(e.usuario.username),className:"Post__autor-comentario"},r.a.createElement("b",null,e.usuario.username)," "),e.mensaje)}))}function ue(e){var t=e.posts.reduce(function(e,t){var a=e[e.length-1];return a&&a.length<3?a.push(t):e.push([t]),e},[]);return r.a.createElement("div",null,t.map(function(e,t){return r.a.createElement("div",{key:t,className:"Grid__row"},e.map(function(e){return r.a.createElement(ie,Object.assign({key:e._id},e))}))}))}function ie(e){var t=e._id,a=e.url,n=e.caption;return r.a.createElement(m.b,{to:"/post/".concat(t,"/"),className:"Grid__post"},r.a.createElement("img",{src:"https://clontagram.herokuapp.com".concat(a),alt:n,className:"Grid__post-img"}))}function le(e){var t=e.mostrarError,a=Object(n.useState)([]),c=Object(l.a)(a,2),o=c[0],s=c[1],p=Object(n.useState)([]),f=Object(l.a)(p,2),b=f[0],E=f[1],h=Object(n.useState)(!0),g=Object(l.a)(h,2),v=g[0],_=g[1];return Object(n.useEffect)(function(){function e(){return(e=Object(i.a)(u.a.mark(function e(){var a,n,r,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([d.a.get("https://clontagram.herokuapp.com/api/posts/explore").then(function(e){return e.data}),d.a.get("https://clontagram.herokuapp.com/api/usuarios/explore").then(function(e){return e.data})]);case 3:a=e.sent,n=Object(l.a)(a,2),r=n[0],c=n[1],s(r),E(c),_(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),t("Error al cargar Explore, intenta de nuevo"),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[0,12]])}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t]),v?r.a.createElement(S,{center:!0},r.a.createElement(N,null)):r.a.createElement(S,{center:!0},r.a.createElement("div",{className:"Explore__section"},r.a.createElement("h2",{className:"Explore__title"},"Descubrir usuarios"),r.a.createElement("div",{className:"Explore__usuarios-container"},b.map(function(e){return r.a.createElement("div",{className:"Explore__usuario",key:e._id},r.a.createElement(z,{usuario:e}),r.a.createElement("p",null,e.username),r.a.createElement(m.b,{to:"/perfil/".concat(e.username)},"Ver Perfil"))}))),r.a.createElement("div",{className:"Explore__section"},r.a.createElement("h2",{className:"Explore__title"},"Explorar"),r.a.createElement(ue,{posts:o})))}function me(e){var t=e.mostrarError,a=e.match,c=e.usuario,o=e.editarperfil,s=e.logout,m=e.history,p=a.params.username,f=Object(n.useState)(!0),b=Object(l.a)(f,2),E=b[0],h=b[1],g=Object(n.useState)(!1),v=Object(l.a)(g,2),_=v[0],k=v[1],j=Object(n.useState)(!1),x=Object(l.a)(j,2),O=x[0],w=x[1],C=Object(n.useState)({_id:"",username:"",nombre:"",bio:""}),P=Object(l.a)(C,2),L=P[0],F=P[1];function q(e){F(Object(y.a)({_id:c._id,username:document.getElementById("username").value,nombre:document.getElementById("nombre").value,bio:document.getElementById("bio").value},e.target.name,e.target.value)),console.log(L)}function D(){return(D=Object(i.a)(u.a.mark(function e(a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!_){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,k(!0),e.next=7,o(L,c.username);case 7:L.username!==p&&(k(!1),s()),k(!1),m.push("/perfil/".concat(c.username)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(3),k(!1),t("error editando el perfil"),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[3,12]])}))).apply(this,arguments)}return Object(n.useEffect)(function(){function e(){return(e=Object(i.a)(u.a.mark(function e(){var a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,d.a.get("https://clontagram.herokuapp.com/api/usuarios/".concat(p));case 4:a=e.sent,n=a.data,F({_id:n._id,username:n.username,nombre:n.nombre,bio:n.bio}),h(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),!e.t0.response||404!==e.t0.response.status&&400!==e.t0.response.status?t("Error cargando perfil"):w(!0),h(!1);case 14:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[p,t]),E?r.a.createElement(S,{center:!0},r.a.createElement(N,null)):O?r.a.createElement(ae,{mensaje:"El perfil que estas intentando ver no existe"}):p!==c.username?r.a.createElement(ae,{mensaje:"Estas intentando editar un perfil que no es tuyo"}):r.a.createElement(S,{center:!0},r.a.createElement("div",{className:"Signup"},r.a.createElement("div",{className:"FormContainer"},r.a.createElement("h1",{className:"Form__titulo"},"Editar perfil"),r.a.createElement("p",{className:"text-sm"},"*Si cambia de nombre de usuario, se desloguear\xe1 de la p\xe1gina"),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:function(e){return D.apply(this,arguments)}},r.a.createElement("p",{className:"FormContainer__info"},"Username"),r.a.createElement("input",{type:"text",name:"username",id:"username",placeholder:"Username",className:"Form__field",required:!0,minLength:"3",maxLength:"30",onChange:q,value:L.username}),r.a.createElement("p",{className:"FormContainer__info"},"Nombre y Apellido"),r.a.createElement("input",{type:"text",name:"nombre",id:"nombre",placeholder:"Nombre y Apellido",className:"Form__field",required:!0,minLength:"3",maxLength:"100",onChange:q,value:L.nombre}),r.a.createElement("p",{className:"FormContainer__info"},"Biograf\xeda"),r.a.createElement("input",{type:"text",name:"bio",id:"bio",placeholder:"Cu\xe9ntanos de ti...",className:"Form__field",required:!0,maxLength:"150",onChange:q,value:L.bio}),r.a.createElement("button",{className:"Form__submit",type:"submit"},"Editar perfil")))))}function pe(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(i.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.siguiendo){e.next=6;break}return e.next=3,d.a.delete("https://clontagram.herokuapp.com/api/amistades/".concat(t._id,"/eliminar"));case 3:a=Object(w.a)({},t,{numSeguidores:t.numSeguidores-1,siguiendo:!1}),e.next=9;break;case 6:return e.next=8,d.a.post("https://clontagram.herokuapp.com/api/amistades/".concat(t._id,"/seguir"));case 8:a=Object(w.a)({},t,{numSeguidores:t.numSeguidores+1,siguiendo:!0});case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function de(e){var t=e.mostrarError,a=e.usuario,c=e.match,o=e.logout,s=e.history,m=c.params.username,p=Object(n.useState)(null),f=Object(l.a)(p,2),b=f[0],E=f[1],h=Object(n.useState)(!0),g=Object(l.a)(h,2),v=g[0],_=g[1],k=Object(n.useState)([]),j=Object(l.a)(k,2),x=j[0],O=j[1],y=Object(n.useState)(!1),C=Object(l.a)(y,2),P=C[0],L=C[1],F=Object(n.useState)(!1),q=Object(l.a)(F,2),D=q[0],I=q[1],A=Object(n.useState)(!1),U=Object(l.a)(A,2),B=U[0],z=U[1],T=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)(function(){var e=window.matchMedia("(min-width: 576px)");function t(){e.matches?r(!1):r(!0)}return e.addListener(t),t(),function(){return e.removeListener(t)}},[]),a}();function G(){return a._id===b._id}function H(){return(H=Object(i.a)(u.a.mark(function e(a){var n,r,c,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(!0),n=a.target.files[0],r={headers:{"Content-Type":n.type}},e.next=6,d.a.post("https://clontagram.herokuapp.com/api/usuarios/upload",n,r);case 6:c=e.sent,o=c.data,E(Object(w.a)({},b,{imagen:o.url})),I(!1),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),t(e.t0.response.data),I(!1),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[0,12]])}))).apply(this,arguments)}function M(){return(M=Object(i.a)(u.a.mark(function e(){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!B){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,z(!0),e.next=6,pe(b);case 6:a=e.sent,E(a),z(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),t("Problema al seguir/dejar de seguir, intenta de nuevo"),z(!1),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[2,11]])}))).apply(this,arguments)}return Object(n.useEffect)(function(){function e(){return(e=Object(i.a)(u.a.mark(function e(){var a,n,r,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(!0),e.next=4,d.a.get("https://clontagram.herokuapp.com/api/usuarios/".concat(m));case 4:return a=e.sent,n=a.data,e.next=8,d.a.get("https://clontagram.herokuapp.com/api/posts/usuario/".concat(n._id));case 8:r=e.sent,c=r.data,E(n),O(c),_(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),!e.t0.response||404!==e.t0.response.status&&400!==e.t0.response.status?t("Error cargando perfil"):L(!0),_(!1);case 19:case"end":return e.stop()}},e,null,[[0,15]])}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[m,t]),v?r.a.createElement(S,{center:!0},r.a.createElement(N,null)):P?r.a.createElement(ae,{mensaje:"El perfil que estas intentando ver no existe"}):null===a?null:r.a.createElement(S,{center:!0},r.a.createElement("div",{className:"Perfil"},r.a.createElement(Ee,{esElPerfilDeLaPersonaLogin:G,usuarioDuenoDelPerfil:b,handleImagenSeleccionada:function(e){return H.apply(this,arguments)},subiendoImagen:D}),r.a.createElement("div",{className:"Perfil__bio-container"},r.a.createElement("div",{className:"Perfil__bio-heading"},r.a.createElement("h2",{className:"capitalize"},b.username),!G()&&r.a.createElement(he,{siguiendo:b.siguiendo,toggleSiguiendo:function(){return M.apply(this,arguments)}}),G()&&r.a.createElement(ve,{logout:o}),G()&&r.a.createElement(ge,{iraEdicion:function(){s.push("/editar/".concat(a.username))}})),!T&&r.a.createElement(be,{usuarioDuenoDelPerfil:b}))),T&&r.a.createElement(be,{usuarioDuenoDelPerfil:b}),r.a.createElement("div",{className:"Perfil__separador"}),x.length>0?r.a.createElement(ue,{posts:x}):r.a.createElement(_e,null))}function be(e){var t=e.usuarioDuenoDelPerfil;return r.a.createElement("div",{className:"Perfil__descripcion"},r.a.createElement("h2",{className:"Perfil__nombre"},t.nombre),r.a.createElement("p",null,t.bio),r.a.createElement("p",{className:"Perfil__estadisticas"},r.a.createElement("b",null,t.numSiguiendo)," Following",r.a.createElement("span",{className:"ml-4"},r.a.createElement("b",null,t.numSeguidores)," Followers")))}function Ee(e){var t,a=e.esElPerfilDeLaPersonaLogin,n=e.usuarioDuenoDelPerfil,c=e.handleImagenSeleccionada;return t=e.subiendoImagen?r.a.createElement(N,null):a()?r.a.createElement("label",{className:"Perfil__img-placeholder Perfil__img-placeholder--pointer",style:{backgroundImage:n.imagen?"https://clontagram.herokuapp.com".concat(n.imagen,")"):null,backgroundColor:U()(n.username)}},r.a.createElement("input",{type:"file",onChange:c,className:"hidden",name:"imagen"})):r.a.createElement("div",{className:"Perfil__img-placeholder",style:{backgroundImage:n.imagen?"url(https://clontagram.herokuapp.com".concat(n.imagen,")"):null,backgroundColor:U()(n.username)}}),r.a.createElement("div",{className:"Perfil__img-container"},t)}function he(e){var t=e.siguiendo,a=e.toggleSiguiendo;return r.a.createElement("button",{onClick:a,className:"Perfil__boton-seguir"},t?"Dejar de seguir":"Seguir")}function ge(e){var t=e.iraEdicion;return r.a.createElement("button",{onClick:t,className:"Perfil__boton-logout"},r.a.createElement(v.a,{icon:_.b}))}function ve(e){var t=e.logout;return r.a.createElement("button",{onClick:t,className:"Perfil__boton-logout"},"Logout")}function _e(){return r.a.createElement("p",{className:"text-center"},"Este usuario no ha posteado fotos")}function ke(e){var t=e.mostrarError,a=e.usuario,n=e.logout,c=e.editarperfil;return r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/upload/",render:function(e){return r.a.createElement(q,Object.assign({},e,{Upload:q,mostrarError:t,usuario:a}))}}),r.a.createElement(p.a,{path:"/post/:id",render:function(e){return r.a.createElement(ce,Object.assign({},e,{Post:ce,mostrarError:t,usuario:a}))}}),r.a.createElement(p.a,{path:"/perfil/:username",render:function(e){return r.a.createElement(de,Object.assign({},e,{Perfil:de,mostrarError:t,usuario:a,logout:n}))}}),r.a.createElement(p.a,{path:"/editar/:username",render:function(e){return r.a.createElement(me,Object.assign({},e,{Editar:me,editarperfil:c,mostrarError:t,usuario:a,logout:n}))}}),r.a.createElement(p.a,{path:"/explore",render:function(e){return r.a.createElement(le,Object.assign({},e,{Explore:le,mostrarError:t,usuario:a}))}}),r.a.createElement(p.a,{default:!0,render:function(e){return r.a.createElement(W,Object.assign({},e,{Feed:W,mostrarError:t,usuario:a}))}}))}function je(e){var t=e.login,a=e.signup,n=e.mostrarError;return r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/login/",render:function(e){return r.a.createElement(F,Object.assign({},e,{login:t,mostrarError:n}))}}),r.a.createElement(p.a,{render:function(e){return r.a.createElement(L,Object.assign({},e,{signup:a,mostrarError:n}))},default:!0}))}d.a.interceptors.request.use(function(e){var t=h();return t&&(e.headers.Authorization="bearer ".concat(t)),e}),d.a.interceptors.response.use(function(e){return e},function(e){if(401!==e.response.status)return Promise.reject(e);g(),window.location="/login"}),o.a.render(r.a.createElement(function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!0),s=Object(l.a)(o,2),p=s[0],f=s[1],b=Object(n.useState)(null),v=Object(l.a)(b,2),_=v[0],k=v[1];function x(){return(x=Object(i.a)(u.a.mark(function e(t,a){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("https://clontagram.herokuapp.com/api/usuarios/login",{email:t,password:a});case 2:n=e.sent,r=n.data,c(r.usuario),E(r.token);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function y(){return(y=Object(i.a)(u.a.mark(function e(t){var a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("https://clontagram.herokuapp.com/api/usuarios/signup",t);case 2:a=e.sent,n=a.data,c(n.usuario),E(n.token);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(){return(w=Object(i.a)(u.a.mark(function e(t,a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),console.log(t),e.next=4,d.a.put("https://clontagram.herokuapp.com/api/usuarios/".concat(a),t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(e){k(e)}return Object(n.useEffect)(function(){function e(){return(e=Object(i.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h()){e.next=3;break}return f(!1),e.abrupt("return");case 3:return e.prev=3,e.next=6,d.a.get("https://clontagram.herokuapp.com/api/usuarios/whoami");case 6:t=e.sent,a=t.data,c(a),f(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[3,12]])}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]),p?r.a.createElement(S,{center:!0},r.a.createElement(N,null)):r.a.createElement(m.a,null,r.a.createElement(j,{usuario:a}),r.a.createElement(O,{mensaje:_,esconderError:function(){k(null)}}),a?r.a.createElement(ke,{mostrarError:C,usuario:a,logout:function(){c(null),g()},Editar:me,editarperfil:function(e,t){return w.apply(this,arguments)}}):r.a.createElement(je,{login:function(e,t){return x.apply(this,arguments)},signup:function(e){return y.apply(this,arguments)},mostrarError:C}))},null),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.041b95fd.chunk.js.map